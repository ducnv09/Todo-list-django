{% extends "base.html" %}
{% load socialaccount %}
{% block title %}Đăng nhập{% endblock %}
{% block content %}
<div class="row justify-content-center align-items-center min-vh-100">
  <div class="col-md-6 col-lg-4">
    <div class="card shadow-lg border-0">
      <div class="card-body p-5">
        <div class="text-center mb-4">
          <i class="fas fa-user-circle fa-3x text-primary mb-3"></i>
          <h1 class="h3 mb-0 text-dark">Đăng nhập</h1>
          <p class="text-muted">Chào mừng trở lại!</p>
        </div>

        {% if form.errors %}
          <div class="alert alert-danger alert-dismissible fade show" role="alert">
            {% for field, errors in form.errors.items %}
              {% for error in errors %}
                <div>{{ error }}</div>
              {% endfor %}
            {% endfor %}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
          </div>
        {% endif %}

        <form method="post" novalidate>
          {% csrf_token %}
          <div class="mb-3">
            <label for="{{ form.username.id_for_label }}" class="form-label">
              <i class="fas fa-user me-2"></i>Tên đăng nhập
            </label>
            <input type="text"
                   class="form-control form-control-lg {% if form.username.errors %}is-invalid{% endif %}"
                   id="{{ form.username.id_for_label }}"
                   name="{{ form.username.name }}"
                   value="{{ form.username.value|default:'' }}"
                   placeholder="Nhập tên đăng nhập"
                   required>
            {% if form.username.errors %}
              <div class="invalid-feedback">
                {% for error in form.username.errors %}{{ error }}{% endfor %}
              </div>
            {% endif %}
          </div>

          <div class="mb-4">
            <label for="{{ form.password.id_for_label }}" class="form-label">
              <i class="fas fa-lock me-2"></i>Mật khẩu
            </label>
            <input type="password"
                   class="form-control form-control-lg {% if form.password.errors %}is-invalid{% endif %}"
                   id="{{ form.password.id_for_label }}"
                   name="{{ form.password.name }}"
                   placeholder="Nhập mật khẩu"
                   required>
            {% if form.password.errors %}
              <div class="invalid-feedback">
                {% for error in form.password.errors %}{{ error }}{% endfor %}
              </div>
            {% endif %}
          </div>

          <div class="d-grid mb-3">
            <button type="submit" class="btn btn-primary btn-lg">
              <i class="fas fa-sign-in-alt me-2"></i>Đăng nhập
            </button>
          </div>
        </form>

        <div class="text-center my-4">
          <div class="position-relative">
            <hr>
            <span class="position-absolute top-50 start-50 translate-middle bg-white px-3 text-muted">hoặc</span>
          </div>
        </div>

        <!-- Google Login Button -->
        <div class="d-grid mb-3">
          <a href="{% provider_login_url 'google' %}" class="btn btn-outline-danger btn-lg">
            <i class="fab fa-google me-2"></i>Đăng nhập với Google
          </a>
        </div>

        <div class="text-center">
          <p class="mb-0 text-muted">Chưa có tài khoản?
            <a href="{% url 'tasks:signup' %}" class="text-decoration-none fw-bold">Đăng ký ngay</a>
          </p>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .min-vh-100 {
    min-height: calc(100vh - 120px);
  }

  .card {
    border-radius: 15px;
    transition: transform 0.2s ease-in-out;
  }

  .card:hover {
    transform: translateY(-5px);
  }

  .form-control:focus {
    border-color: #0d6efd;
    box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.15);
  }

  .btn-primary {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border: none;
    border-radius: 10px;
    transition: all 0.3s ease;
  }

  .btn-primary:hover {
    background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
  }

  .btn-outline-danger {
    border-radius: 10px;
    transition: all 0.3s ease;
  }

  .btn-outline-danger:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(220, 53, 69, 0.2);
  }
</style>
{% endblock %}
